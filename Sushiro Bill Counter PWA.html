<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="å£½å¸è¨ˆæ•¸">
    <meta name="description" content="é‚Šé£Ÿé‡é‚Šè¨ˆæ•¸ï¼Œå³æ™‚çŸ¥é“ä½ é£Ÿå·¦å¹¾éŒ¢! ğŸ£">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23007bff' width='192' height='192'/><text x='96' y='120' font-size='100' text-anchor='middle' fill='white' font-family='Arial'>ğŸ£</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect fill='%23007bff' width='180' height='180' rx='40'/><text x='90' y='135' font-size='90' text-anchor='middle' fill='white' font-family='Arial'>ğŸ£</text></svg>">
    <title>å£½å¸éƒè¨ˆæ•¸æ©Ÿ</title>
    <style>
        :root {
            --color-red: #d32f2f;
            --color-silver: #9e9e9e;
            --color-gold: #ffb300;
            --color-black: #212121;
            --color-primary: #007bff;
            --color-bg: #f5f5f5;
            --color-text: #333;
            --color-text-secondary: #666;
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--color-bg);
            padding: 0;
            padding-bottom: max(180px, calc(180px + env(safe-area-inset-bottom)));
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        /* Sticky Header - Cover Dynamic Island */
        .header {
            position: sticky;
            top: 0;
            background: white;
            padding: 16px 20px;
            padding-top: max(12px, env(safe-area-inset-top));
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            z-index: 90;
        }

        h1 {
            text-align: center;
            color: var(--color-text);
            font-size: 1.3rem;
            margin: 0;
            font-weight: 600;
        }

        /* å¡ç‰‡æ¨£å¼ */
        .card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin: 0 20px 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* é¡è‰²è­˜åˆ¥æ¢ */
        .color-indicator {
            width: 10px;
            height: 50px;
            border-radius: 5px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .red { background-color: var(--color-red); }
        .silver { background-color: var(--color-silver); }
        .gold { background-color: var(--color-gold); }
        .black { background-color: var(--color-black); }

        .info {
            flex-grow: 1;
        }

        .price-label {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--color-text);
        }

        /* æŒ‰éˆ•æ§åˆ¶å€ */
        .controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .ctrl-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            transition: all 0.15s ease;
            -webkit-user-select: none;
            user-select: none;
        }

        .btn-minus {
            background-color: #e0e0e0;
            color: #757575;
        }

        .btn-minus:active {
            background-color: #d0d0d0;
            transform: scale(0.95);
        }

        .btn-plus {
            background-color: var(--color-primary);
            color: white;
        }

        .btn-plus:active {
            background-color: #0056b3;
            transform: scale(0.95);
        }

        .count-display {
            font-size: 1.3rem;
            font-weight: bold;
            width: 36px;
            text-align: center;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ç‰¹åˆ¥æ–™ç†å€åŸŸ */
        .section-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--color-text);
            margin: 25px 20px 15px 20px;
            padding: 10px 0;
            border-bottom: 2px solid var(--color-primary);
        }

        /* è¼¸å…¥å…¶ä»–é‡‘é¡ */
        .custom-input {
            width: calc(100% - 40px);
            margin: 0 20px;
            padding: 12px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 10px;
        }

        /* é‡ç½®æŒ‰éˆ• */
        .reset-container {
            text-align: center;
            margin: 25px 20px 20px 20px;
        }

        .reset-btn {
            background-color: white;
            border: 1px solid var(--color-red);
            color: var(--color-red);
            padding: 10px 30px;
            font-size: 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .reset-btn:active {
            background-color: var(--color-red);
            color: white;
        }

        /* åº•éƒ¨å›ºå®šçµç®—æ¬„ - Safe Area é©é… */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 -4px 15px rgba(0,0,0,0.15);
            padding: 15px 20px;
            padding-bottom: max(15px, env(safe-area-inset-bottom));
            border-radius: 16px 16px 0 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        .total-label {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            margin-bottom: 4px;
        }

        .final-price-container {
            text-align: right;
        }

        .final-price {
            font-size: 2rem;
            font-weight: bold;
            color: var(--color-red);
            line-height: 1;
        }

        .service-charge {
            font-size: 0.8rem;
            color: #888;
            margin-top: 5px;
            text-align: center;
        }

        /* Modal æ¨£å¼ */
        dialog {
            border: none;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 95vw;
            max-height: 80vh;
            padding: 0;
            animation: slideUp 0.3s ease-out;
        }

        dialog::backdrop {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(3px);
        }

        @keyframes slideUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            background: white;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.3rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            max-height: calc(80vh - 100px);
            overflow-y: auto;
            padding: 10px;
            padding-bottom: 20px;
        }

        .modal-category {
            font-weight: bold;
            font-size: 1rem;
            color: var(--color-text);
            background: #f5f5f5;
            padding: 12px 12px 8px 12px;
            margin-top: 12px;
            border-bottom: 2px solid var(--color-primary);
        }

        .modal-category:first-child {
            margin-top: 0;
        }

        .modal-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
        }

        .modal-item-info {
            flex-grow: 1;
        }

        .modal-item-name {
            font-weight: 500;
            font-size: 1rem;
            color: var(--color-text);
        }

        .modal-item-price {
            font-size: 0.9rem;
            color: var(--color-primary);
            font-weight: bold;
        }

        .modal-item-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-item-count {
            width: 30px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .small-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            transition: all 0.15s ease;
        }

        .small-btn-minus {
            background-color: #f0f0f0;
            color: #888;
        }

        .small-btn-minus:active {
            background-color: #e0e0e0;
        }

        .small-btn-plus {
            background-color: var(--color-primary);
            color: white;
        }

        .small-btn-plus:active {
            background-color: #0056b3;
        }

        /* Scrollbar æ¨£å¼ */
        .modal-body::-webkit-scrollbar {
            width: 6px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: transparent;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 3px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #999;
        }
    </style>
</head>
<body>

    <!-- Sticky Header -->
    <div class="header">
        <h1>ğŸ£ å£½å¸éƒè¨ˆæ•¸æ©Ÿ</h1>
    </div>

    <!-- ç¢Ÿå­å€åŸŸ -->
    <div class="section-title">ğŸ½ï¸ ç¢Ÿå­</div>

    <div class="card">
        <div class="color-indicator red"></div>
        <div class="info">
            <div class="price-label">ç´…ç¢Ÿ $12</div>
        </div>
        <div class="controls">
            <button class="ctrl-btn btn-minus" onclick="updateCount('red', -1)">âˆ’</button>
            <span id="red-count" class="count-display">0</span>
            <button class="ctrl-btn btn-plus" onclick="updateCount('red', 1)">+</button>
        </div>
    </div>

    <div class="card">
        <div class="color-indicator silver"></div>
        <div class="info">
            <div class="price-label">éŠ€ç¢Ÿ $17</div>
        </div>
        <div class="controls">
            <button class="ctrl-btn btn-minus" onclick="updateCount('silver', -1)">âˆ’</button>
            <span id="silver-count" class="count-display">0</span>
            <button class="ctrl-btn btn-plus" onclick="updateCount('silver', 1)">+</button>
        </div>
    </div>

    <div class="card">
        <div class="color-indicator gold"></div>
        <div class="info">
            <div class="price-label">é‡‘ç¢Ÿ $22</div>
        </div>
        <div class="controls">
            <button class="ctrl-btn btn-minus" onclick="updateCount('gold', -1)">âˆ’</button>
            <span id="gold-count" class="count-display">0</span>
            <button class="ctrl-btn btn-plus" onclick="updateCount('gold', 1)">+</button>
        </div>
    </div>

    <div class="card">
        <div class="color-indicator black"></div>
        <div class="info">
            <div class="price-label">é»‘ç¢Ÿ $27</div>
        </div>
        <div class="controls">
            <button class="ctrl-btn btn-minus" onclick="updateCount('black', -1)">âˆ’</button>
            <span id="black-count" class="count-display">0</span>
            <button class="ctrl-btn btn-plus" onclick="updateCount('black', 1)">+</button>
        </div>
    </div>

    <!-- ç‰¹åˆ¥æ–™ç†å€åŸŸ -->
    <div class="section-title">âœ¨ ç‰¹åˆ¥æ–™ç†</div>

    <div class="card">
        <div class="info">
            <div class="price-label">ç‰¹åˆ¥èœå–®</div>
            <div style="font-size: 0.9rem; color: #999; margin-top: 4px;">é»æ“ŠæŸ¥çœ‹å…¨éƒ¨ç‰¹åˆ¥æ–™ç†</div>
        </div>
        <button class="ctrl-btn btn-plus" onclick="openSpecialDishesModal()" style="margin-left: auto;">+</button>
    </div>

    <!-- ç‰¹åˆ¥æ–™ç†ç¸½é¡ -->
    <div class="card" style="background: #f9f9f9; border: 1px solid #e0e0e0;">
        <div class="info">
            <div class="price-label">ç‰¹åˆ¥æ–™ç†å°è¨ˆ</div>
            <div style="font-size: 0.9rem; color: #999; margin-top: 4px;">$<span id="special-total">0</span></div>
        </div>
        <div style="font-size: 1.3rem; font-weight: bold; color: var(--color-primary);">
            <span id="special-count">0</span> ä»¶
        </div>
    </div>

    <!-- å…¶ä»–é‡‘é¡è¼¸å…¥ -->
    <div class="section-title">ğŸ¥¤ å…¶ä»– / ç”œå“ / é£²å“</div>

    <div style="margin: 0 20px;">
        <div class="price-label">å…¶ä»–é‡‘é¡ (ç¸½é¡)</div>
        <input type="number" id="custom-amount" class="custom-input" placeholder="è¼¸å…¥é‡‘é¡ (ä¾‹å¦‚: 38)" oninput="calculateTotal()">
    </div>

    <!-- é‡ç½®æŒ‰éˆ• -->
    <div class="reset-container">
        <button class="reset-btn" onclick="resetAll()">å…¨éƒ¨é‡ç½®</button>
    </div>

    <!-- åº•éƒ¨çµç®—æ¬„ -->
    <div class="footer">
        <div class="total-row">
            <div>
                <div class="total-label">ç¸½ç¢Ÿæ•¸: <span id="total-plates" style="font-weight:bold; color:var(--color-text);">0</span></div>
                <div class="total-label">é£Ÿç‰©å°è¨ˆ: $<span id="subtotal">0</span></div>
            </div>
            <div class="final-price-container">
                <div class="total-label" style="margin-bottom:0;">é è¨ˆç¸½é¡</div>
                <div class="final-price">$<span id="grand-total">0</span></div>
            </div>
        </div>
        <div class="service-charge">(å·²åŒ…æ‹¬ 10% æœå‹™è²»ï¼Œé‡‘é¡åƒ…ä¾›åƒè€ƒ)</div>
    </div>

    <!-- ç‰¹åˆ¥æ–™ç† Modal -->
    <dialog id="specialDishesModal">
        <div class="modal-header">
            <h2>ç‰¹åˆ¥æ–™ç†èœå–®</h2>
            <button class="modal-close" onclick="document.getElementById('specialDishesModal').close()">âœ•</button>
        </div>
        <div class="modal-body" id="modalBody">
            <!-- å‹•æ…‹ç”Ÿæˆ -->
        </div>
    </dialog>

    <script>
        // æ•¸æ“šçµæ§‹
        const specialDishes = [
            // æ–™ç†
            { id: 'dish1', name: 'é’å”è¾›å­ç‡’æ¤’é†¬', price: 3, category: 'æ–™ç†' },
            { id: 'dish2', name: 'é»ƒé‡‘è„†è–¯', price: 13, category: 'æ–™ç†' },
            { id: 'dish3', name: 'å—ç“œå¤©å©¦ç¾…', price: 13, category: 'æ–™ç†' },
            { id: 'dish4', name: 'ç‚¸è¦å¤©å©¦ç¾…æ‹¼ç›¤(åŠä»½)', price: 18, category: 'æ–™ç†' },
            { id: 'dish5', name: 'ç‚¸è¦å¤©å©¦ç¾…', price: 18, category: 'æ–™ç†' },
            { id: 'dish6', name: 'ç‚¸é›è»Ÿéª¨', price: 19, category: 'æ–™ç†' },
            { id: 'dish7', name: 'èŒ¶ç¢—è’¸', price: 19, category: 'æ–™ç†' },
            { id: 'dish8', name: 'èœ†è‚‰æµ·è‹”éºµè±‰æ¹¯', price: 20, category: 'æ–™ç†' },
            { id: 'dish9', name: 'è„†è„†ç‚¸é›å¡Š', price: 22, category: 'æ–™ç†' },
            { id: 'dish10', name: 'è…çš®çƒå†¬', price: 27, category: 'æ–™ç†' },
            { id: 'dish11', name: 'é‡œç‰çƒå†¬', price: 28, category: 'æ–™ç†' },
            { id: 'dish12', name: 'ç‚¸è¦å¤©å©¦ç¾…çƒå†¬', price: 28, category: 'æ–™ç†' },
            { id: 'dish13', name: 'ç‚¸è¦å¤©å©¦ç¾…æ‹¼ç›¤', price: 28, category: 'æ–™ç†' },
            { id: 'dish14', name: 'è±šéª¨æ‹‰éºµ', price: 32, category: 'æ–™ç†' },
            { id: 'dish15', name: 'é¯›é­šæ¹¯èœ†è‚‰æ‹‰éºµ', price: 33, category: 'æ–™ç†' },
            { id: 'dish16', name: 'ç‰›è‚‰çƒå†¬', price: 33, category: 'æ–™ç†' },
            { id: 'dish17', name: 'ä¸‰æ–‡é­šåˆºèº«ç››', price: 39, category: 'æ–™ç†' },
            { id: 'dish18', name: 'å…­é¸åˆºèº«ç››', price: 39, category: 'æ–™ç†' },
            { id: 'dish19', name: 'èµ¤è¦åˆºèº«', price: 39, category: 'æ–™ç†' },

            // ç”œå“
            { id: 'dish20', name: 'èœœç“œå‘³é›ªè‘©', price: 13, category: 'ç”œå“' },
            { id: 'dish21', name: 'å†·å‡èŠ’æœ', price: 13, category: 'ç”œå“' },
            { id: 'dish22', name: 'ç‰›å¥¶å‘³è»Ÿé›ªç³•(æœ‰æ›²å¥‡)', price: 18, category: 'ç”œå“' },
            { id: 'dish23', name: 'ç‰›å¥¶å‘³è»Ÿé›ªç³•', price: 18, category: 'ç”œå“' },
            { id: 'dish24', name: 'å£½å¸éƒç¶“å…¸å¸ƒç”¸', price: 22, category: 'ç”œå“' },
            { id: 'dish25', name: 'å¡é”æ‹‰å¨œ', price: 22, category: 'ç”œå“' },
            { id: 'dish26', name: 'åƒå±¤è›‹ç³•', price: 22, category: 'ç”œå“' },
            { id: 'dish27', name: 'æŠ¹èŒ¶è•¨é¤…èŠ­è²', price: 27, category: 'ç”œå“' },
            { id: 'dish28', name: 'æœ±å¤åŠ›é¦™è“èŠ­è²', price: 27, category: 'ç”œå“' },

            // é£²å“
            { id: 'dish29', name: 'ç™¾äº‹å¯æ¨‚(ç„¡ç³–)', price: 8, category: 'é£²å“' },
            { id: 'dish30', name: 'ç™¾äº‹å¯æ¨‚', price: 8, category: 'é£²å“' },
            { id: 'dish31', name: 'ç¾å¹´é”æ©™æ±', price: 8, category: 'é£²å“' },
            { id: 'dish32', name: 'ä¸ƒå–œ', price: 8, category: 'é£²å“' },
            { id: 'dish33', name: 'ç¶­ä»–æ°£æ³¡æª¸æª¬èŒ¶', price: 8, category: 'é£²å“' },
            { id: 'dish34', name: '100ï¼…è˜‹æœæ±', price: 8, category: 'é£²å“' },
            { id: 'dish35', name: 'çº–è§£èŒ¶', price: 9, category: 'é£²å“' },

            // é…’é¡
            { id: 'dish36', name: 'èŠæ­£å®—', price: 17, category: 'é…’é¡' },
            { id: 'dish37', name: 'Horoyoi(è‘¡è„å‘³)', price: 19, category: 'é…’é¡' },
            { id: 'dish38', name: 'Horoyoi(æŸšå­é¹½å‘³)', price: 19, category: 'é…’é¡' },
            { id: 'dish39', name: 'ä¸‰å¾—åˆ©é ‚ç´šå•¤é…’', price: 24, category: 'é…’é¡' },
            { id: 'dish40', name: 'æ¢…é…’(å«æ¢…å­)', price: 27, category: 'é…’é¡' },
            { id: 'dish41', name: 'å¨å£«å¿Œæ¢³æ‰“', price: 27, category: 'é…’é¡' },
            { id: 'dish42', name: 'èŠæ­£å®—(å¤§åŸé‡€)', price: 59, category: 'é…’é¡' }
        ];

        let counts = { red: 0, silver: 0, gold: 0, black: 0 };
        const prices = { red: 12, silver: 17, gold: 22, black: 27 };
        let specialCounts = {};

        // åˆå§‹åŒ–ç‰¹åˆ¥æ–™ç†è¨ˆæ•¸
        specialDishes.forEach(dish => {
            specialCounts[dish.id] = 0;
        });

        function updateCount(type, change) {
            if (counts[type] + change < 0) return;
            counts[type] += change;
            document.getElementById(type + '-count').innerText = counts[type];
            calculateTotal();
            if (navigator.vibrate) navigator.vibrate(30);
        }

        function updateSpecialDishCount(dishId, change) {
            if (specialCounts[dishId] + change < 0) return;
            specialCounts[dishId] += change;
            
            // æ›´æ–° modal ä¸­çš„é¡¯ç¤º
            const countDisplay = document.getElementById(dishId + '-count');
            if (countDisplay) countDisplay.innerText = specialCounts[dishId];
            
            calculateTotal();
            if (navigator.vibrate) navigator.vibrate(30);
        }

        function openSpecialDishesModal() {
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = '';

            const categories = ['æ–™ç†', 'ç”œå“', 'é£²å“', 'é…’é¡'];
            
            categories.forEach(category => {
                const categoryDishes = specialDishes.filter(d => d.category === category);
                if (categoryDishes.length === 0) return;

                // åˆ†é¡æ¨™é¡Œ
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'modal-category';
                categoryDiv.textContent = category;
                modalBody.appendChild(categoryDiv);

                // è©²åˆ†é¡ä¸‹çš„èœé …
                categoryDishes.forEach(dish => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'modal-item';
                    itemDiv.innerHTML = `
                        <div class="modal-item-info">
                            <div class="modal-item-name">${dish.name}</div>
                            <div class="modal-item-price">$${dish.price}</div>
                        </div>
                        <div class="modal-item-controls">
                            <button class="small-btn small-btn-minus" onclick="updateSpecialDishCount('${dish.id}', -1)">âˆ’</button>
                            <div class="modal-item-count" id="${dish.id}-count">${specialCounts[dish.id]}</div>
                            <button class="small-btn small-btn-plus" onclick="updateSpecialDishCount('${dish.id}', 1)">+</button>
                        </div>
                    `;
                    modalBody.appendChild(itemDiv);
                });
            });

            document.getElementById('specialDishesModal').showModal();
        }

        function calculateTotal() {
            // è¨ˆç®—ç¢Ÿå­ç¸½é¡
            let foodTotal = (counts.red * prices.red) + 
                            (counts.silver * prices.silver) + 
                            (counts.gold * prices.gold) + 
                            (counts.black * prices.black);
            
            // è¨ˆç®—ç¢Ÿå­ç¸½æ•¸
            let totalPlates = counts.red + counts.silver + counts.gold + counts.black;

            // è¨ˆç®—ç‰¹åˆ¥æ–™ç†ç¸½é¡å’Œè¨ˆæ•¸
            let specialTotal = 0;
            let specialCount = 0;
            specialDishes.forEach(dish => {
                specialTotal += specialCounts[dish.id] * dish.price;
                specialCount += specialCounts[dish.id];
            });

            foodTotal += specialTotal;

            // åŠ ä¸Šæ‰‹å‹•è¼¸å…¥çš„é‡‘é¡
            let customInput = document.getElementById('custom-amount').value;
            let customAmount = parseFloat(customInput) || 0;
            foodTotal += customAmount;

            // è¨ˆç®—åŠ æœå‹™è²»
            let grandTotal = Math.round(foodTotal * 1.1);

            // æ›´æ–°ç•«é¢
            document.getElementById('total-plates').innerText = totalPlates;
            document.getElementById('special-count').innerText = specialCount;
            document.getElementById('special-total').innerText = specialTotal;
            document.getElementById('subtotal').innerText = foodTotal;
            document.getElementById('grand-total').innerText = grandTotal;
        }

        function resetAll() {
            if (!confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰ç´€éŒ„é‡æ–°è¨ˆç®—å—ï¼Ÿ')) return;
            
            counts = { red: 0, silver: 0, gold: 0, black: 0 };
            document.getElementById('red-count').innerText = 0;
            document.getElementById('silver-count').innerText = 0;
            document.getElementById('gold-count').innerText = 0;
            document.getElementById('black-count').innerText = 0;
            
            specialDishes.forEach(dish => {
                specialCounts[dish.id] = 0;
            });
            
            document.getElementById('custom-amount').value = '';
            calculateTotal();
        }

        // é—œé–‰ modal æ™‚è‡ªå‹•è¨ˆç®—
        document.getElementById('specialDishesModal').addEventListener('close', calculateTotal);

        // é é¢åŠ è¼‰æ™‚åˆå§‹åŒ–
        calculateTotal();
    </script>
</body>
</html>
